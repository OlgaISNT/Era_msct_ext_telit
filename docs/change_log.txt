ID=2206241842
1) Добавлено rev=2 для блоков 24В;
2) Добавлено чтение/запись порога срабатывания датчика удары. Диапазон [0.5,50.0]g. g=9.81 (м/сек^2)
3) Для rev = 0, 1, 2 интервал мигания при не прошитом VIN - 500(1)/500(0) мС.
4) Изменение состояния КЛ15 фиксируется в течении 1 сек
5) Коэффициент пересчёта напряжения кл30 для rev1 = 9.67, для rev2 = 18;
6) Изменения в работе вочдога для MCP2515
   - При CAN_FILTER=0 микросхема никогда не переходит в спящий режим, т.к. ожидается приход сигнала от ПБ каждые 0.5 сек.
   - Для CAN_FILTER= -1 и -2 микросхема переходит в спящий режим через 5 сек молчания на шине.
   При появлении кадров происходит ее пробуждение. Также отслеживается состояние КЛ15, при изменении состояния из
   выкл во вкл происходит сброс MCP

ID=1306241059
1) Микрофон считается подключенным если значение АЦП в диапазоне [30,650] (Аветис)
2) Количество аудиопрофилей увеличено до 21 [0,20];
3) Добавлены комплекты ACDB:
   - Changan UNI-K (AUDIOPROFILE_POSITION = 13)
   - Jetour Dashing (AUDIOPROFILE_POSITION = 14)
   - Jetour T2 (AUDIOPROFILE_POSITION = 15)
   - EXEED  EXLANTIX E03 (AUDIOPROFILE_POSITION = 16)
   - EXLANTIX E0Y (AUDIOPROFILE_POSITION = 17)
4) На текущий момент аудио профили 8 а также [18,20] - есть заглушки;
5) Добавлено условие: если "INT_MEM_TRANSMIT_INTERVAL=1 или ECALL_DIAL_DURATION=1", то после запуска экстренного вызова сначала
воспроизводится аудиоподсказка, потом формируется МНД; в противном случае сначала формируется МНД, а потом воспроизводится аудиоподсказка.
7) При установленных значениях INT_MEM_TRANSMIT_INTERVAL=1 или ECALL_DIAL_DURATION=1 горячий рестарт ГНСС после завершения вызова не выполняется.
8) При установленных значениях INT_MEM_TRANSMIT_INTERVAL=1 или ECALL_DIAL_DURATION=1 число попыток дозвона принудительно выставляется в 2.
9) Убран запрет опроса ГНСС перед отправкой СМС в ситуации отсутствия регистрации в сети.
10) Значение по умолчанию для номера debug изменено на +79418100029.

ID=1705241819
1) MODEL_ID можно задать в диапазоне [11,30];
2) Для MODEL_ID=11 VIN можно прописать неограниченное количество раз. Для остальных MODEL_ID - VIN задается только если не был прописан ранее;

ID=1305241342
1) Разрешено перезапись VIN неограниченное количество раз;

ID=2404241145
1) Максимальное количество аудиопрофилей расширено до 13 штук;
2) Добавлены комплекты ACDB:
- AVT EXEED TXL ACDB  (AUDIOPROFILE_POSITION = 10)
- AVT EXEED VX ACDB SERT (AUDIOPROFILE_POSITION = 11)
- Changan_ACDB_CS35 (AUDIOPROFILE_POSITION = 12)

ID=2304240933
1.Добавлена перезагрузка модема при отказе АТ-команд после совершения попытки тестового вызова (без совершения повторных попыток тестового вызова после
перезагрузки).
2.Добавлена команда выключения модема через API перед командой выключения модема с помощью АТ-команды "AT#SHDN" (на случай выполнения перезагрузки модема
в условиях отказа АТ-команд).
3.Добавлена световая и звуковая индикация завершения любого вызова.
4.Убрано выключение БЭГа после завершения ожидания обратного вызова.
5.Убрано ожидание дозвона в течение 20 сек. в случае, если команда AT#MONI не возвратила информацию о сотовой сети.
6.Включена звуковая/световая индикация входящего вызова после тестового звонка.
Изменения от Алексея Клокова:
- Мы когда он/офф выключаем, там сразу все напряжения начинают меняться. И считывать показания ацп и gpio уже бессмысленно. (Соколов А.И.)
- Если on_off_mode ВЫключен, то кнопка SOS считается ненажатой.

ID=2102241524
1) Добавлены события индикации:
-SHOW_RING_SIGNAL. Отобразить входящий сигнал RING ("красный индикатор" согласно требованию А.Архипова от 21.02.24).
-CANCEL_SHOW_RING_SIGNAL. Прекратить отображать входящий сигнал RING и вернуться к отображению предыдущего состояния ("зелёный индикатор" согласно требованию А.Архипова от 21.02.24)
2) Исправлена передача по CAN состояния кнопки SOS в тестовом режиме.

ID=1020241409
Сделал запрошенные изменения и проверил обработчик события срабатывания таймера CCFT:
1.По запросу А.Архипова для прохождения теста п.6.20 перед отправкой ответной СМС добавлено ожидание появления валидных геоданных в течение 25 сек.
2.Исправлен алгоритм обработки таймера CCFT:
раньше при его срабатывании результат экстренного вызов маркировался в приложении как неуспешный,
 теперь как успешный. Однако это предыдущее поведение не могло приводить к безусловному повторному вызову при срабатывании CCFT.

ID=0702241644
1. Исправлено отсутствие в МНД ошибки crash_sensor_failure;
2. В составе МНД, vehicleDirection = 255 если fix и/или скорость равны 0;
3. (Изменение отменено) Добавлен Рестарт GNSS при дерегистрации;

ID=0702241629
1. Исправлено отсутствие в МНД ошибки crash_sensor_failure;
2. В составе МНД, vehicleDirection = 255 если fix и/или скорость равны 0;
3. Добавлен Рестарт GNSS при дерегистрации;

ID=0502241536
1. Изменения для индикации REV=1 :
   -Начало экстренного/тестового вызова индикатор мигает красный/зеленый 950/950мсек;
   -Отправка МНД (экстренный/тестовый вызов) индикатор светится красным;
   -Дозвон(экстренный/тестовый вызов) индикатор светится зеленым;
   -Подключение голосового канала (экстренный/тестовый вызов) индикатор светится зеленым;
   -Экстренный/тестовый вызов невозможен мигает красный/зеленый 1950/250мсек;
2. Отключено переключение профилей СИМ;
3. Ошибка сим в терминале более не отображается;
4. В era.cfg обавлен параметр GNSS_WDT [0,3600]. Значение по умолчанию 300;

ID=2212231408
-Тестовый профиль на сим считается эра профилем; (Козенков Д.А.)
-Убрано ожидание подтверждения декодирование мнд, чтобы не срабатывал таймер; (Козенков Д.А.)
-Ошибка по акселерометру появляется, только если проверка на who_am_i провалилась более 10 раз;(Соколов А.И.)
-Время фиксации изменения состояния КЛ15 3 сек; (Красавин Д.С.)

ID=1812231408
Сделанные изменения:
1. Таймаут "горячего" рестарта ГНСС 300 сек
2. Сброс timestamp в 0 в МНД только по команде холодного рестарта ГНСС.
3. RTC не используется при формировании timestamp в МНД
4. На время выполнения вызова данные от ГНСС игнорируются. Приложение
использует только тот набор данных, который получило от ГНСС в момент
начала вызова. По его окончании приложение возобновляет
обработку данных от ГНСС. (Козенков Д.А.)
5. Пакет ПО содержит последнюю версию терминала (1.40); (Николаев А.Ю.)

ID=122231340
-REV=0 - ПО 1.00;
-REV=1 - ПО 1.01;
(Соколов А.И.)

ID=1212230927
-Убрана проверка версии ПО в составе серийного номера; (Соколов А.И.)

ID=1112231838
-Исправлена работа EGTS команды CCD_ECALL_DEREGISTRATION; (Д. Козенков)
-Обновлен CAN терминал; (Николаев А.Ю.)
-Добавлен ручной вызов в UDS протокол;(Архипов А.В.)
-При низком заряде батареи индикатор светится зеленым; (Архипов А.В.)

ID=0712231155
1) Для сообщений от подушек с идентификатором 0xAB: (Соколов А.И.)
-Ожидается, что информацию об ударе содержит только 8 бит;
2) Переделано взаимодействие БЭГа с 2х проводным БИПом для REV=1; (Тер-Аветисян А.В.)
3) Для UDS: (Архипов А.В.)
-Добавлено чтение/запись параметра CCFT;
-Добавлено чтение/запись параметра MsdMaxTransmissionTime;
-Добавлено чтение/запись параметра TestModeEndDistance;

ID=30011231655
Для сообщений от подушек с идентификатором 0xAB:
-Ожидается, что информацию об ударе содержит 2й байт; (Соколов А.И.)

ID=0711231048
-При CAN_FILTER=-2 блок не отслеживает состояния подушек безопасности и не формирует ошибок про них.
Удары определяется акселерометром; (Соколов А.И.)

ID=3110231132
-Ошибка инициализации акселерометра появляется только после 3х проваленных попыток инициализации; (Соколов А.И.)
-Вкладка DTC терминала. При отсутствии сигнала от ПБ вместо ошибки "Неверные данные Airbag",
будет появляться ошибка "Нет связи с Airbag". (Соколов А.И.)
-Добавлен комплект ACDB файлов для CHERY JAECOO C8 (AUDIOPROFILE_POSITION=9); (Соколов А.И.)
-На текущий момент аудио профили [10,11] - есть заглушки;

ID=2710231749
-Добавлено расширение UDS протокола для работы с файлами через CAN; (Соколов А.И.)
-Исправлена ошибка при которой во вкладках "Состояние" и "Vehicle" для аттрибута gsm отображался статус "not initial".
Теперь при простое модема отображается статус "idle"; (Архипов А.В.)
-Исправлена ошибка из-за которой после нажатия кнопки "Clear DTC" имеющиеся ошибки более не появлялась, хотя по факту они были; (Архипов А.В.)
-Добавлен комплект ACDB файлов для CHERY EXEED RX (AUDIOPROFILE_POSITION=8); (Соколов А.И.)
-На текущий момент аудио профили [9,11] - есть заглушки;
-В пакет ПО добавлен обновленный терминал;

ID=1710231223 (fix для 1410231900)
-Исправлена ситуация когда, при длительном отсутствии сигнала от подушек безопасности, терминал переставал работать;

ID=1410231900
Изменения в конфигурационном файле factory.cfg
1)Добавлен выбор ревизии платы через параметр "REV":
   *REV=0 - обычная эра чери;
   *REV=1 - пробная версия ПО для эры чери с 2х проводным бипом; (Тер-Аветисян А.В.)
2) Изменения для параметра "CAN_FILTER": (Архипов А.В.)
   *CAN_FILTER=-1 эра не отслеживает состояния подушек безопасности и не формирует ошибок про них;
   *CAN_FILTER=0 эра ожидает сообщений от подушек по 1 из ID 0x31C, 0x320, 0x021, 0xAB;


ID=2309231306
-Таймаут SA для тестового режима - 60 сек. Таймаут SA для (Тер-Аветисян А.В.)
-Исправлена ошибка длины пакета для сервиса 19 (Формальнов П.И.)

ID=1809231353
-Добавлен комплект ACDB файлов для CHERY ARRIZO 8 (AUDIOPROFILE_POSITION=7);
-Увеличено максимальное количество аудио профилей;
-На текущий момент аудио профили [8,11] - есть заглушки;
(Соколов А.И.)

ID=1409231509
-Добавлен счетчик. Каждый раз при запуске era проверяет наличие неотправленных мнд.
Если неотправленные МНД были обнаружены, то счетчик увеличивается на 1, иначе - сбрасывается в 0.
Когда значение счетчика становится равным ECALL_MANUAL_DIAL_ATTEMPTS - все сохраненные МНД удаляются,
а счетчик сбрасывается в 0.
(Соколов А.И.)

ID=0609231104
-При CAN_FILTER=-1 блок не отслеживает состояния подушек безопасности и не формирует ошибок про них; (Соколов А.И.)
-В терминале более не появятся ошибки о перегреве/переохлаждении батареи
(возможны ситуации когда акб не заряжается и нигде не указывается причина); (Пушкина Е.Н.)
-Изменение состояния KL15 фиксируется около 2х секунд; (Красавин Д.С.)
-Изменения в программном вочдоге для CAN. Ожидается, что теперь mcp работает при выключенной КЛ15; (Красавин Д.С.)

ID=2908230958 (fix)
-Добавлен комплект ACDB файлов для OMODA S5/S5GT (AUDIOPROFILE_POSITION=4);
-Добавлен комплект ACDB файлов для OMODA С5 (AUDIOPROFILE_POSITION=6);
-Содержит все изменения из ПО ID=2908230958;

ID=2908230958
Изменения для AUDIOPROFILE_POSITION.
"...Мы его должны видеть в uds и при программировании в базу данных сохраняем вместе с параметрами из factory.cfg.
Чтобы можно было отследить, чем он изначально был запрограммирован..."
"...Просто убери проверку при включении зажигания. При изменении по uds- переписываем файлы и меняем номер в factory.cfg..."
(Соколов А.И.)
-AUDIOPROFILE_POSITION хранится в factory.cfg;
-AUDIOPROFILE_POSITION не проверяется при включении зажигания;
-AUDIOPROFILE_POSITION доступен для чтения/записи в рамках UDS протокола;

ID=2808231917
-мелкие исправления;
-В файле factory.cfg теперь хранится 2 флага аудиопрофилей - текущий и предыдущий;

ID=180821718 (ПО для краштеста машин с CAN_FILTER=1)
-Уменьшен период вочдога для CAN;
-Мелкие исправления;

ID=1508231118
-Убран флаг ТМ из файла factory.cfg;
-Зайти в тестовый режим теперь можно только через SA;
-При отсутствии обмена более 10сек тестовый режим будет выключен и эра вернется в нормальный режим;

ID=1108231834
-В UDS extension добавлена команда get_Vbat;
-get_Vbat доступна только в тестовом режиме;
-Изменено описание EOL_CHERY_V1_3

ID=1707232207
-Ошибка кнопки SOS более не привязана к обрыву микрофона;
-События EV_SOS_STUCK/EV_SOS_UNSTUCK генерируются при удерживании в зажатом состоянии кнопки SOS более 10сек и
ее отпускании соответственно;
-При застревании кнопки SOS, во вкладке DTC терминала будет отображаться соответствующая ошибка,
а при ее освобождении эта ошибка будет пропадать;
-В случае НЕ подтверждения, успешного воспроизведения контрольной фразы, будут появляться ошибки микрофона, динамика и кнопки SOS.
Данные ошибки будут сохраняться до выключения зажигания или сброса по диагностике и не появляться до следующего возникновения.

ID=0407231120
-Добавлен комплект acdb AVT_CHERY_T35_ACDB_TELIT_MAIN_CONFIG (AUDIOPROFILE_POSITION = 4);
-Исправлена ошибка, когда после теста микрофона и динамика переставала работать кнопка "Self-test Mic+dyn" в терминале;

ID=1706231449
Добавлен выбор ожидаемого сигнала от подушек безопасности по CAN шине
В файле factory.cfg
- При CAN_FILTER=0 ожидаемый ID сигнала от подушек 0x31C (796)
- При CAN_FILTER=1 ожидаемый ID сигнала от подушек 0x320 (800)

ID=1505231442
-Количество доступных аудио профилей увеличено с 4 до 7;

ID=2505231150
-Версия терминала обновлена до версии 1.30;
-При нажатии на кнопку Reset GSM терминала (вкладка Routine) происходит удаление всех сохраненных МНД и перезагрузка модема;
-При нажатии на кнопку ClearEEPROM терминала (вкладка Routine) происходит деактивация блока, сброс VIN, сброс калибровок акселерометра, удаление всех сохраненных МНД, сброс счетчиков вызовов;

ID=1505231432
-Во время тестового вызова эра пытается дозвониться только 1 раз. Если попытка тестового вызова не завершилась успехом, то воспроизводится голосовая подсказака no_test_call.wav
-Убран код, делающий доступными виртуальные порты, после 10 самопроизвольных перезагрузок БЭГа.

ID=2804231911
-В sysp.cfg добавлен флаг самопроизвольных перезагрузок БЭГа.
Каждая перезагрузка добавляет +1. По достижении 10 таких перезагрузок все виртуальные порты становятся доступны.
Сброс флага до 0 осуществляется стандартным выключением БЭГа (КЛ15/КЛ30);


ID=2804231554
-Добавлена ошибка сим. Ошибка сим появляется если нельзя считать ICCID и/или IMSI.
Ошибка сим не отображается индикацей и считывается только по UDS в сервисе 0х19. 
При наличии данной ошибки запрещены любые вызовы.

ID=1104231526
-AUDIOPROFILE_POSITION теперь хранится в factory.cfg;

ID=0704231844
-В сервисе 0x2E доступен ввод параметров без прохождения процедуры SA пока блок не активирован;

ID=0504231041
-Уменьшено время выключения ERA, при размыкании КЛ15, с 5мин до 20сек;

ID=0304231402
-Добавлен change_log;
-Увеличено время выключения ERA, при размыкании КЛ15, с 20сек до 5мин;